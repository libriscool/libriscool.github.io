import{r as o,c as y,o as f,a as l,b as d,d as e,t as u,e as m,F as w,f as k,w as x,v as B,n as C,g as E,h as L,u as V}from"./index-a9f90031.js";const D={class:"modal fade",tabindex:"-1",id:"dlg-login"},I={class:"modal-dialog modal-dialog-centered"},$={class:"modal-content"},K=e("div",{class:"modal-header"},[e("h5",{class:"modal-title"},"User login"),e("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1),M={class:"modal-body"},N={class:"container"},U={key:0,class:"alert alert-danger m-3"},F=["type","id","onUpdate:modelValue","placeholder","onInput","autocomplete","disabled","onKeyup"],z={key:0,class:"invalid-feedback"},S=["for"],T={class:"modal-footer"},j=["disabled"],q={key:0,class:"spinner-border spinner-border-sm me-1"},A=["disabled"],J={__name:"login",emits:["loged-in","hide"],setup(G,{emit:h}){const s={username:{type:"text",data:o(""),error:o(!1),autocomplete:"username",title:"username"},password:{type:"password",data:o(""),error:o(!1),autocomplete:"current-password",title:"password"}},v=y(()=>s.username.data.value&&!s.username.error.value&&!s.password.error.value),n=o(!1),t=o(!1),p=h;var r=null;f(()=>{r=new bootstrap.Modal("#dlg-login"),r.show();let i=document.getElementById("dlg-login");i.addEventListener("hidden.bs.modal",g=>p("hide")),i.addEventListener("shown.bs.modal",()=>document.getElementById("field-username").focus())});async function _(){!v.value||t.value||(t.value=!0,n.value=await V.value.login(s.username.data.value,s.password.data.value),n.value||(p("loged-in"),r.hide()),t.value=!1)}return(i,g)=>(l(),d("div",D,[e("div",I,[e("div",$,[K,e("div",M,[e("div",N,[n.value?(l(),d("div",U,u(n.value),1)):m("",!0),e("form",null,[(l(),d(w,null,k(s,(a,c)=>e("div",{key:`field-${c}`,class:"form-floating row m-3"},[x(e("input",{class:C(["form-control",{"is-invalid":a.error.value}]),type:a.type,id:`field-${c}`,"onUpdate:modelValue":b=>a.data.value=b,placeholder:a.title,onInput:b=>a.error.value=!1,autocomplete:a.autocomplete||"off",disabled:t.value,onKeyup:E(_,["enter"])},null,42,F),[[B,a.data.value,void 0,{trim:!0}]]),a.error.value?(l(),d("div",z,u(a.error),1)):m("",!0),e("label",{for:`field-${c}`,class:"form-label"},u(a.title),9,S)])),64))])])]),e("div",T,[e("button",{type:"button",class:"btn btn-primary",style:{width:"100px"},disabled:!v.value||t.value,onClick:_},[t.value?(l(),d("span",q)):m("",!0),L(" Login ")],8,j),e("button",{type:"button",class:"btn btn-secondary",style:{width:"100px"},"data-bs-dismiss":"modal",disabled:t.value}," Cancel ",8,A)])])])]))}};export{J as default};
